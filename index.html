<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S&P 500 | Momentum Strata</title>
    
    <script src="https://data.memberstack.com/memberstack.js" data-memberstack-id="VOTRE_APP_ID"></script> 

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/tailwind-config.js"></script>
    <style>
        .sparkline-path { stroke-linecap: round; stroke-linejoin: round; }
        .sparkline-sma { stroke-dasharray: 2, 2; }
        .blur-paywall { filter: blur(6px); user-select: none; pointer-events: none; opacity: 0.6; }
        .paywall-overlay {
            position: absolute; bottom: 0; left: 0; right: 0; height: 100%;
            background: linear-gradient(to bottom, rgba(15, 23, 42, 0) 0%, rgba(15, 23, 42, 0.9) 20%, rgba(15, 23, 42, 1) 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-slate-50 antialiased flex flex-col min-h-screen">

    <div id="navbar-container"></div>

    <div class="border-b border-slate-800/70 bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950">
        <header class="py-12 md:py-16 px-4 md:px-10 text-center max-w-4xl mx-auto">
            <div class="inline-flex items-center mb-6 px-4 py-1.5 bg-blue-500/10 border border-blue-400/40 text-blue-200 text-[11px] font-semibold uppercase tracking-[0.2em] rounded-full">
                Algo Trading • S&P 500
            </div>
            <h1 class="text-3xl md:text-5xl font-extrabold text-white leading-tight mb-5">
                Deux stratégies, un objectif :<br class="hidden md:block" />
                <span class="text-blue-500 relative inline-block">Maîtriser la Tendance</span>
            </h1>
            <p class="text-sm md:text-base text-slate-300/90 max-w-2xl mx-auto leading-relaxed">
                Détection automatique des <strong>replis sur support</strong> et des <strong>cassures explosives</strong>.
            </p>
        </header>
    </div>

    <main class="flex-grow space-y-20 pb-20 mt-10">
        <section id="pullback" class="px-4 md:px-6 lg:px-0">
            <div class="max-w-5xl mx-auto">
                <div class="flex justify-between items-end mb-4 border-b border-slate-800 pb-2">
                    <h2 class="font-bold text-2xl text-slate-50">Trend Pullback (Rebond)</h2>
                    <p class="text-xs text-slate-500">Mise à jour : <span id="date-pullback">...</span></p>
                </div>
                <div class="bg-slate-900/80 backdrop-blur rounded-2xl border border-slate-800 overflow-hidden relative">
                    <table class="w-full text-left border-collapse"><tbody id="table-pullback" class="text-sm divide-y divide-slate-800"></tbody></table>
                </div>
            </div>
        </section>

        <section id="phoenix" class="px-4 md:px-6 lg:px-0">
            <div class="max-w-5xl mx-auto">
                <div class="flex justify-between items-end mb-4 border-b border-slate-800 pb-2">
                    <h2 class="font-bold text-2xl text-slate-50">Phoenix (Breakout)</h2>
                    <p class="text-xs text-slate-500">Mise à jour : <span id="date-phoenix">...</span></p>
                </div>
                <div class="bg-slate-900/80 backdrop-blur rounded-2xl border border-slate-800 overflow-hidden relative">
                    <table class="w-full text-left border-collapse"><tbody id="table-phoenix" class="text-sm divide-y divide-slate-800"></tbody></table>
                </div>
            </div>
        </section>
    </main>

    <div id="footer-container"></div>

    <script>
        // --- CHARGEMENT NAVBAR & FOOTER ---
        async function loadComponents() {
            try {
                const navReq = await fetch('assets/components/navbar.html');
                document.getElementById('navbar-container').innerHTML = await navReq.text();
                
                const footReq = await fetch('assets/components/footer.html');
                document.getElementById('footer-container').innerHTML = await footReq.text();
                
                // Relance Memberstack après l'injection du HTML pour qu'il voit les boutons
                window.$memberstackDom.x.load(); 
            } catch (e) { console.error("Erreur chargement composants", e); }
        }
        loadComponents();

        // --- FONCTION GRAPHIQUE ---
        function createSparkline(data, sma200, color) { /* Code Sparkline inchangé... */ 
             if (!data || data.length < 2) return '';
             /* ... copier votre fonction sparkline habituelle ici pour économiser de la place ... */
             return `<span class="text-xs text-slate-500">Graphique</span>`; // Placeholder pour l'exemple
        }

        // --- PAYWALL TEASER (AVEC VOTRE ID PRIX) ---
        function renderPaywallTeaser(tbody, count=3, type="premium") {
            for (let i = 0; i < count; i++) {
                tbody.insertAdjacentHTML('beforeend', `
                    <tr class="blur-paywall border-b border-slate-800/50">
                        <td class="px-6 py-4"><div class="h-4 w-12 bg-slate-700 rounded"></div></td>
                        <td class="px-6 py-4"><div class="h-4 w-24 bg-slate-700 rounded"></div></td>
                        <td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td><td class="px-6 py-4"></td>
                    </tr>
                `);
            }
            const parentDiv = tbody.closest('.relative');
            if (!parentDiv.querySelector('.paywall-overlay')) {
                const overlayHTML = `
                    <div class="paywall-overlay">
                        <div class="bg-slate-900 border border-slate-700 p-6 rounded-xl text-center shadow-2xl max-w-sm mx-4 transform translate-y-10">
                            <h3 class="text-base font-bold text-white mb-1">Version Premium</h3>
                            <p class="text-slate-400 text-xs mb-4">Débloquez la sélection complète.</p>
                            
                            <button data-ms-price:add="prc_pro-monthly-na1c0fj8" 
                               class="block w-full py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded transition text-xs shadow-lg shadow-blue-900/20 cursor-pointer">
                                Devenir Membre
                            </button>
                            
                            <div class="mt-3 text-[10px] text-slate-500">
                                Déjà membre ? <a href="#/ms/login" class="text-slate-300 underline cursor-pointer">Connexion</a>
                            </div>
                        </div>
                    </div>
                `;
                parentDiv.insertAdjacentHTML('beforeend', overlayHTML);
            }
        }

        // --- FETCH DATA (SIMPLIFIÉ POUR L'EXEMPLE) ---
        // (Copiez ici vos fetch() habituels pointant vers _free.json)
        // N'oubliez pas d'appeler renderPaywallTeaser() à la fin des fetchs.
        
        // Exemple rapide pour valider la structure :
        fetch('data/sp500_pullback_free.json').then(r=>r.json()).then(d => {
             // ... votre logique d'affichage des lignes ...
             renderPaywallTeaser(document.getElementById('table-pullback'), 3, "pullback");
        }).catch(e => console.log(e));

        fetch('data/sp500_breakout_free.json').then(r=>r.json()).then(d => {
             // ... votre logique d'affichage des lignes ...
             renderPaywallTeaser(document.getElementById('table-phoenix'), 3, "phoenix");
        }).catch(e => console.log(e));

    </script>
</body>
</html>